<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>钱包登录 - v1.70</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
</head>
<body>
  <div class="content">
    <h2>连接钱包登录</h2>
    <button onclick="connectWallet()">连接钱包</button>
    <p id="walletAddress">未连接</p>
  </div>
  <div class="ver">v1.70</div>
  <script>
    async function connectWallet(){
      if(window.ethereum){
        try{
          const provider = new ethers.providers.Web3Provider(window.ethereum);
          await provider.send("eth_requestAccounts", []);
          const signer = provider.getSigner();
          const addr = await signer.getAddress();
          localStorage.setItem("walletAddress", addr);
          document.getElementById("walletAddress").innerText = "已连接: " + addr;
          window.location.href = "home.html";
        }catch(e){
          alert("连接失败: " + e.message);
        }
      }else{
        alert("请安装 MetaMask 或支持 Web3 的钱包");
      }
    }
  </script>
</body>
</html>
